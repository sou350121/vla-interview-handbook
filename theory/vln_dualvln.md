# DualVLN：Ground Slow, Move Fast —— VLN 的“快慢系统”基础模型

> 本文是手册中 **VLN（Vision-and-Language Navigation，视觉语言导航）** 的首篇专题。内容基于公开介绍与论文信息整理，重点抽象其 **工程可落地的快慢系统协同范式**，便于面试与系统设计复用。

---

## 1) VLN 的长期矛盾：慢思考 vs 快反应

VLN 的核心任务是：给定 **第一视角视觉** + **自然语言指令**，输出能在真实环境中持续执行的 **导航行为**。

行业里长期存在的基本矛盾是：

- **强语义理解/泛化** 通常依赖大模型的“慢思考”（推理重、频率低）
- **平滑连续/动态避障** 则需要“快反应”（控制频率高、延迟低）

传统端到端紧耦合方案（图像+语言 → 每一步离散动作）在落地中常见三类瓶颈：

- **动作碎片化**：每一步都要调用大模型，轨迹不连贯，像“走一步想一步”
- **响应延迟高**：大模型推理慢，难以支撑高频控制
- **层次耦合**：语义理解、全局规划、局部避障绑在一起，难以处理动态变化

---

## 2) DualVLN 的核心：异步双系统（慢规划 / 快执行）

DualVLN 的关键思想是 **解耦 + 异步**：把“高层语义与中期路标”交给慢系统，把“高频轨迹与避障”交给快系统。

```text
                 (≈ 2 Hz)                           (≈ 30 Hz)
  ┌──────────────────────────┐        ┌──────────────────────────────────┐
  │ System 2：慢思考（大脑）  │        │ System 1：快行动（小脑）          │
  │  - 理解指令/看环境         │  --->  │  - 高频轨迹生成/动态避障           │
  │  - 预测中期像素路标 (u,v)  │        │  - 输出连续轨迹（密集路径点）       │
  │  - 必要时决定“转头/低头”   │        │  - 利用实时图像修正像素目标误差     │
  └──────────────────────────┘        └──────────────────────────────────┘
```

### System 2（慢系统 / 大脑）：像素级路标 + 视角调整

- **模型形态**：基于 VLM（文中提到基座为 **Qwen-VL-2.5**）的全局/中期规划器  
- **运行频率**：约 **2 Hz**（每 0.5s 更新一次）
- **输出**：
  - **像素级目标点**（2D 像素坐标 `(u, v)`），作为中期导航路标
  - **视角调整动作**（例如左/右转 15°、抬头/低头 15°），在“目标不在视野/视野不佳”时主动找视野

这等价于把“3D 路径规划”转化为“在当前画面上指一个你应该走向的最远可见点”。

### System 1（快系统 / 小脑）：条件扩散策略生成连续轨迹

- **模型形态**：轻量级 **Diffusion Transformer Policy**
- **运行频率**：最高约 **30 Hz**
- **输入**：
  - System 2 给出的 **像素目标** +（隐含的）**语义目标特征**
  - **当前高频 RGB**（实时画面）
- **输出**：可执行的 **平滑连续轨迹**（例如 32 个密集路径点）

它的职责是：在语义目标“低频更新”时，仍能根据实时画面“快修正、快避障”。

---

## 3) 关键训练构造：把 3D 导航变成 “最远像素目标 Grounding”

DualVLN 的一个核心工程点是：**不靠人工逐帧标注路标**，而是用仿真数据自动生成训练监督。

典型做法（论文描述思路）：

- 已知仿真中机器人的 **3D 未来轨迹**
- 将未来一段轨迹上的点 **投影** 到当前第一视角图像平面
- 用深度/遮挡信息过滤：只保留 **当前视角真实可见** 的点
- 从可见点里选 **最远** 的一个作为当前时刻的“像素路标”

这使得 System 2 的学习目标变成：  
**给你图像序列+指令，在图里指出下一步应该走向哪个像素位置**（必要时先做视角搜索）。

---

## 4) 跨层对齐：把“慢系统语义”传给“快系统控制”

快慢系统要协同，关键在于：System 1 不能只拿一个 \((u,v)\)——它还需要“为什么去那儿”的语义。

文中提到一种抽取方式：

- 在 System 2 产生像素目标的同时，其隐藏状态包含任务语义
- 用少量 **可学习的查询向量（如 4 个 latent queries）** 从隐藏状态里抽取“与当前任务最相关”的语义特征
- 将该特征作为 **低频语义条件** 传给 System 1

同时，System 1 以高频实时图像作为 **高频视觉条件**，并可融合“System 2 输出目标时的旧图像特征”与“当前新图像特征”，缓解语义条件的“过时”问题。

---

## 5) 评测与基准：从静态到动态社交环境

文中提到 DualVLN 在 VLN-CE、VLN-PE 等基准上取得领先，并提出更贴近真实动态场景的 **Social-VLN**：

- 在环境中加入动态行走的人形机器人
- 在传统指标之外，引入 **Human Collision Rate** 衡量与行人的不安全交互

这类指标对“快系统”的局部避障能力更敏感，也更能体现双系统异步控制的价值。

---

## 6) 真机部署视角：为什么“异步解耦”更像工程正确答案

从工程落地（尤其是移动平台）角度，双系统带来几个直接收益：

- **延迟预算可控**：慢系统偶尔慢一点不致命，快系统继续以 20~30Hz 输出轨迹
- **动作连续性更好**：轨迹由快系统连续生成，不再“离散跳步”
- **安全性更可控**：快系统可以做局部避障/速度限制/紧急制动，避免把安全逻辑塞进大模型

文中描述的真机平台包括轮式（Turtlebot4）、四足（Unitree Go2）、人形（Unitree G1），传感器为 Intel RealSense D455（RGB）。

> 面试/工程建议：你可以把 DualVLN 抽象成“低频语义路标（2Hz） + 高频局部控制（30Hz）”的通用模板，迁移到操作（manipulation）同样成立：低频产出子目标/接触意图，高频产出控制量并做安全约束。

---

## 7) 面试高频问法（建议背诵的回答骨架）

- **为什么端到端紧耦合在真机上容易失败？**  
  因为它把语义理解、规划、控制绑在同一个低频/高延迟链路里，导致动作碎片化、延迟高、难以处理动态变化。

- **DualVLN 的本质贡献是什么？**  
  用异步双系统解耦“慢语义/中期路标”和“快轨迹/避障”，在系统层面解决延迟与连续性的矛盾。

- **为什么用 2D 像素路标而不是直接 3D 路径？**  
  像素路标更贴合 VLM 的强项（grounding），且可以从仿真轨迹自动生成监督，降低标注成本。

- **快系统为什么选扩散策略？**  
  轨迹/动作天然多模态，扩散类生成更擅长输出平滑、分布覆盖更好的连续轨迹，并能用实时视觉条件进行修正。

---

## 参考链接

- **论文**：[*GROUND SLOW, MOVE FAST: A DUAL-SYSTEM FOUNDATION MODEL FOR GENERALIZABLE VISION-AND-LANGUAGE NAVIGATION*](https://arxiv.org/abs/2512.08186)（可在页面内下载 PDF）
- **项目主页**：[internvla-n1-dualvln](https://internrobotics.github.io/internvla-n1-dualvln.github.io/)
- **代码**：[InternRobotics/InternNav](https://github.com/InternRobotics/InternNav)

---

## 关联阅读（本手册内）

- [Diffusion Policy](./diffusion_policy.md)（为什么扩散适合多模态轨迹/动作）
- [动作表示方法](./action_representations.md)（动作空间与轨迹生成范式）
- [VLA 架构总览](./vla_arch.md)（如何把 VLM 与控制头解耦）

